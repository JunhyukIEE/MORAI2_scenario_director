npc_controller:
  ros__parameters:
    line.optimal_path: "map/waypoints.csv"

    # NPC ID (1-9, launch file에서 오버라이드)
    npc.id: 1

    # NPC별 속도 설정 (waypoint 속도 대비 배율)
    # NPC_1이 가장 느리고, NPC_9가 가장 빠름
    npc.speed_ratio.npc_1: 1.0
    npc.speed_ratio.npc_2: 0.88
    npc.speed_ratio.npc_3: 0.91
    npc.speed_ratio.npc_4: 0.94
    npc.speed_ratio.npc_5: 0.97
    npc.speed_ratio.npc_6: 1.00
    npc.speed_ratio.npc_7: 1.03
    npc.speed_ratio.npc_8: 1.06
    npc.speed_ratio.npc_9: 1.10

    npc.min_speed_ratio: 0.8        # 최소 속도 배율
    npc.max_speed_ratio: 1.0        # 최대 속도 배율

    vehicle.wheelbase: 2.7
    vehicle.max_steering: 0.55

    control.loop_hz: 100.0
    control.throttle_kp: 0.1
    control.brake_kp: 0.1
    control.max_throttle: 1.0
    control.max_brake: 1.0

    # Collision avoidance with ego vehicle
    collision_avoidance.enabled: true
    collision_avoidance.danger_distance: 5.0    # 위험 거리 (즉시 브레이킹)
    collision_avoidance.caution_distance: 10.0  # 주의 거리 (점진적 감속)
    collision_avoidance.ttc_threshold: 2.0      # TTC 임계값 (초)
    collision_avoidance.side_margin: 2.0        # 횡방향 마진 (같은 차선 판단)
    collision_avoidance.min_speed_ratio: 0.2    # 최소 속도 비율
    collision_avoidance.brake_intensity: 0.8    # 브레이킹 강도
